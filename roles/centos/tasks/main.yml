
- name: set hostname
  hostname:
    name: "{{hostname}}"

- name: add ssh key for root
  authorized_key:
    user: root
    state: present
    key: "{{ lookup('file', '~/.ssh/id_rsa.pub') }}"

- name: add epel repository
  yum:
    state: present
    name: epel-release

- name: add common packages
  yum:
    state: present
    name: "{{packages}}"

- import_tasks: docker.yml
  tags: docker
  when: '"docker" in roles'

- import_tasks: golang.yml
  tags: golang
  when: '"golang" in roles'

- import_tasks: node.yml
  tags: node
  when: '"node" in roles'

- import_tasks: yarn.yml
  tags: yarn
  when: '"yarn" in roles'

- import_tasks: python.yml
  tags: python
  when: '"python" in roles'

- import_tasks: postgresql.yml
  tags: postgresql
  when: '"postgresql" in roles'

- import_tasks: sensu.yml
  tags: sensu
  when: '"sensu" in roles'

- import_tasks: security.yml
  tags: security
